(function(e,s){typeof exports=="object"&&typeof module<"u"?module.exports=s():typeof define=="function"&&define.amd?define(s):(e=typeof globalThis<"u"?globalThis:e||self,e.EhMarqueeContainer=s())})(this,function(){"use strict";class e{constructor(i){this.container=i.containerEl,this.pauseOnHover=i.animation?.pause_on_hover||!1,this.speed=1,this.position=0,this.tracks=null,this.isVertical=!1,this.containerComputedStyle=null,this.cleanupDuplicate(),this.setClone(),this.getContainerComputedStyle(),this.setIsVertical(),this.setDirection(),this.setSpeed(),requestAnimationFrame(this.update.bind(this)),this.initEvents()}cleanupDuplicate(){this.container.querySelector(".is-duplicate")?.remove()}getContainerComputedStyle(){this.containerComputedStyle=getComputedStyle(this.container)}setIsVertical(){this.isVertical=this.containerComputedStyle.flexDirection=="column",this.container.setAttribute("data-layout",this.containerComputedStyle.flexDirection)}setDirection(){this.isReversed=this.containerComputedStyle.justifyContent=="flex-end"}setSpeed(){this.speed=this.containerComputedStyle.getPropertyValue("--speed")*10||10,this.animationSpeed=this.speed}setClone(){const t=this.container.querySelector(".eh-marquee-container__track").cloneNode(!0);t.classList.add("is-duplicate"),t.setAttribute("aria-hidden","true");for(let n of t.children)n.setAttribute("aria-hidden","true");this.container.appendChild(t),this.tracks=[...this.container.children]}update(){requestAnimationFrame(this.update.bind(this));const i=this.isVertical?this.container.offsetHeight:this.container.offsetWidth,t=this.speed/i*100*(1/60);this.position+=this.isReversed?t:-t,(!this.isReversed&&this.position<=-100||this.isReversed&&this.position>=100)&&(this.position=0);const n=this.isVertical?`translateY(${this.position}%)`:`translateX(${this.position}%)`;this.tracks.forEach(o=>{o.style.transform=n})}onResize(){this.getContainerComputedStyle(),this.setIsVertical(),this.setDirection(),this.setSpeed()}initEvents(){this.pauseOnHover&&(this.container.addEventListener("pointerenter",()=>{this.speed=0}),this.container.addEventListener("pointerleave",()=>{this.speed=this.animationSpeed})),window.addEventListener("resize",this.onResize.bind(this))}}return e});
