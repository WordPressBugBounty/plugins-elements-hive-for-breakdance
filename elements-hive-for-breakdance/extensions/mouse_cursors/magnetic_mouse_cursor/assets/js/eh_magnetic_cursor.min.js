(function(r,o){typeof exports=="object"&&typeof module<"u"?module.exports=o(require("gsap")):typeof define=="function"&&define.amd?define(["gsap"],o):(r=typeof globalThis<"u"?globalThis:r||self,r.EhMagneticCursor=o(r.gsap))})(this,function(r){"use strict";const e=(s=>s&&typeof s=="object"&&"default"in s?s:{default:s})(r);class h{constructor(t){this.domContainer=t.domContainer,this.eventsContainer=t.eventsContainer,this.outerEl=t.outerEl,this.innerEl=t.innerEl,this.outerElOriginalState=t.outerElOriginalState,this.magneticElements=t.magneticElements,this.updateWrap=!1,this.isHovering=!1,this.mouse={x:0,y:0},this.targetMouse={x:0,y:0},this.innerElOriginalBcr=this.innerEl.getBoundingClientRect(),this.lerpFactor=this.innerEl?.1:.75,this.init()}init(){this.initEvents(),requestAnimationFrame(this.render.bind(this))}setInnerElPosition(){e.default.set(this.innerEl,{x:`${this.targetMouse.x-this.innerElOriginalBcr.width/2}px`,y:`${this.targetMouse.y-this.innerElOriginalBcr.height/2}px`})}setOuterElPosition(){e.default.set(this.outerEl,{x:`${this.mouse.x-this.outerElOriginalState.width/2}px`,y:`${this.mouse.y-this.outerElOriginalState.height/2}px`})}wrapActiveEl(){const t=this.currentTarget.getBoundingClientRect(),i=getComputedStyle(this.currentTarget);e.default.to(this.outerEl,{duration:.4,ease:"power3.out",x:t.left,y:t.top,width:t.width,height:t.height,borderRadius:i.borderRadius,onStart:()=>{this.isPlaying=!0,e.default.set(this.innerEl,{autoAlpha:0})},onComplete:()=>{this.isPlaying=!1}})}resetWrap(){e.default.to(this.outerEl,{duration:.4,ease:"power3.inOut",width:this.outerElOriginalState.width,height:this.outerElOriginalState.height,borderRadius:this.outerElOriginalState.borderRadius,onStart:()=>{e.default.set(this.innerEl,{autoAlpha:1})}})}render(){requestAnimationFrame(this.render.bind(this));const t=this.mouse;this.mouse.x=e.default.utils.interpolate(t.x,this.targetMouse.x,this.lerpFactor),this.mouse.y=e.default.utils.interpolate(t.y,this.targetMouse.y,this.lerpFactor),this.updateWrap&&this.wrapActiveEl(),!(this.isHovering&!this.isTouchDevice)&&(this.setInnerElPosition(),this.setOuterElPosition())}onMouseMove(t){this.targetMouse.x=t.clientX,this.targetMouse.y=t.clientY}onEnter(t){this.isHovering||(this.isHovering=!0,this.currentTarget=t.target,this.currentTarget.classList.contains("eh-glue-button")&&(this.updateWrap=!0),this.wrapActiveEl())}onLeave(){this.updateWrap&&(this.updateWrap=!1),this.isHovering=!1,this.resetWrap()}initMouseEvents(){this.magneticElements.forEach(t=>{t.addEventListener("mouseenter",this.onEnter.bind(this)),t.addEventListener("mouseleave",this.onLeave.bind(this))})}initEvents(){window.addEventListener("mousemove",this.onMouseMove.bind(this)),this.initMouseEvents()}}class l{constructor(t){this.options=t,this.parent=t.parent,this.domContainer=t.domContainer,this.isRelativeToPage=t.isRelativeToPage,this.outerClass="eh-magnetic-cursor-outer",this.innerClass="eh-magnetic-cursor-inner",this.instanceClass=t.forIdClass,this.additionalSelectors=t.additionalSelectors,this.magneticElements=[],this.cleanUpExistingMarkup(),this.createOuterMarkup(),this.createInnerMarkup(),this.getSelectorsForEffect(),this.init()}cleanUpExistingMarkup(){var t,i;(t=document.querySelector(`.${this.outerClass}.${this.instanceClass}`))==null||t.remove(),(i=document.querySelector(`.${this.innerClass}.${this.instanceClass}`))==null||i.remove()}createOuterMarkup(){const t=document.createElement("div");t.classList.add(this.outerClass,this.instanceClass),this.domContainer.append(t),this.outerEl=t}createInnerMarkup(){const t=document.createElement("div");t.classList.add(this.innerClass,this.instanceClass),this.domContainer.append(t),this.innerEl=t}getSelectorsForEffect(){this.selectorsForEffect=[".breakdance-link",".bde-social-share-button"],this.additionalSelectors&&this.additionalSelectors.forEach(t=>{this.selectorsForEffect.push(t.selector)}),this.selectorsForEffect.forEach(t=>{var n;this.domContainer.querySelector(t)&&((n=this.domContainer.querySelectorAll(`${t}:not(.eh-magnetic-cursor__ignore)`))==null||n.forEach(a=>{!a.closest(".eh-magnetic-cursor__ignore")&&!a.closest(".eh-magnetic-cursor__hide")&&this.magneticElements.push(a)}))})}showCustomCursor(){this.outerEl.style.visibility="initial",this.innerEl.style.visibility="initial"}hideCustomCursor(){this.outerEl.style.visibility="hidden",this.innerEl.style.visibility="hidden"}showDefaultCursor(){this.isRelativeToPage?document.body.style.cursor="initial":this.parent.style.cursor="initial"}hideDefaultCursor(){this.isRelativeToPage?document.body.style.cursor="none":this.parent.style.cursor="none"}init(){var i;const t={outerEl:this.outerEl,innerEl:this.innerEl,magneticElements:this.magneticElements,...this.options};this.isRelativeToPage||this.hideCustomCursor(),this.cursor=new h(t),this.isRelativeToPage||(this.domContainer.addEventListener("mouseenter",this.showCustomCursor.bind(this)),this.domContainer.addEventListener("mouseleave",this.hideCustomCursor.bind(this))),(i=this.domContainer.querySelectorAll(".eh-magnetic-cursor__hide"))==null||i.forEach(n=>{n.addEventListener("mouseenter",()=>{this.hideCustomCursor(),this.showDefaultCursor()}),n.addEventListener("mouseleave",()=>{this.showCustomCursor(),this.hideDefaultCursor()})})}}return l});
